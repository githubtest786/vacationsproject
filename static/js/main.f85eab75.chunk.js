(this.webpackJsonpvacationsproject=this.webpackJsonpvacationsproject||[]).push([[0],{102:function(e,t,a){e.exports=a(264)},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},129:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},166:function(e,t){},169:function(e,t,a){},170:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(95),i=a.n(r),o=(a(107),a(108),a(2)),c=a(6),l=a(8),u=a(7),p=(a(109),a(110),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{id:"title"},s.a.createElement("h1",null,s.a.createElement("span",{className:"brand"},"Global")," tours")))}}]),a}(n.Component)),d=(a(111),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,"All rights reserved to Guy Rozen and Global tours 2020")}}]),a}(n.Component)),m=a(1),h=a.n(m),v=a(3),g=a(18),b=a.n(g),f=(a(129),function e(t,a){Object(o.a)(this,e),this.username=t,this.password=a}),y=a(14),k=b.a.create({baseURL:"https://vacationsappapi.herokuapp.com/api"}),E=localStorage.getItem("key");function x(){var e=localStorage.getItem("key");k.defaults.headers.common.Authorization="Bearer "+e}k.defaults.headers.common.Authorization="Bearer "+E,b.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),b.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var w,N=k,S=a(96),j=a(101);!function(e){e[e.editChosenVacation=0]="editChosenVacation",e[e.userType=1]="userType",e[e.updateVacations=2]="updateVacations"}(w||(w={}));var D=Object(S.a)((function(e,t){var a=Object(j.a)({},e);switch(t.type){case w.editChosenVacation:a.chosenVacation=t.payload;break;case w.userType:a.userType=t.payload;break;case w.updateVacations:a.updateVacations=t.payload}return a}),new function e(){Object(o.a)(this,e),this.chosenVacation=void 0,this.userType=void 0,this.updateVacations=void 0}),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setUsername=function(e){var t=e.target.value;n.setState({username:t})},n.setPassword=function(e){var t=e.target.value;n.setState({password:t})},n.loginUser=Object(v.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new f(n.state.username,n.state.password),e.next=4,b.a.post("http://localhost:3001/api/users/login",t);case 4:a=e.sent,localStorage.setItem("key",a.data.token),D.dispatch({type:w.userType,payload:a.data.userType}),x(),"admin"===a.data.userType?n.props.history.push("/admin/controlpanel"):n.props.history.push("/vacations"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert("Incorrect details, please try again with different ones!"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),n.state={username:"",password:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=localStorage.getItem("key")&&this.props.history.push("/vacations");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"loginForm"},s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"Username")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"username","aria-describedby":"basic-addon1",placeholder:"Username",name:"username",value:this.state.username,onChange:this.setUsername})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon2"},"Password")),s.a.createElement("input",{type:"password",className:"form-control","aria-label":"password","aria-describedby":"basic-addon2",placeholder:"Password",name:"password",value:this.state.password,onChange:this.setPassword}),s.a.createElement("br",null))),s.a.createElement("input",{type:"button",className:"btn btn-outline-primary btn-lg",value:"Login",onClick:this.loginUser}),s.a.createElement(y.b,{to:"/signup",exact:!0},s.a.createElement("input",{type:"button",className:"btn btn-outline-info btn-lg",value:"Not registered? Sign up here!"})))}}]),a}(n.Component),C=(a(135),function e(t,a,n,s){Object(o.a)(this,e),this.username=t,this.password=a,this.first_name=n,this.last_name=s}),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setUsername=function(e){var t=e.target.value;n.setState({username:t})},n.setPassword=function(e){var t=e.target.value;n.setState({password:t})},n.setFirstName=function(e){var t=e.target.value;n.setState({first_name:t})},n.setLastName=function(e){var t=e.target.value;n.setState({last_name:t})},n.signUp=Object(v.a)(h.a.mark((function e(){var t,a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.state.username,a=!1,s=0;s<n.state.takenUsernames.length;s++)t===n.state.takenUsernames[s].username&&(a=!0,s=n.state.takenUsernames.length);if(!(""===n.state.username||n.state.username.length<3||n.state.username.length>20)){e.next=7;break}alert("Username cannot be empty! A username must be between 3 to 20 chars!"),e.next=35;break;case 7:if(!a){e.next=11;break}alert("Username already taken! Please try another one!"),e.next=35;break;case 11:if(!(""===n.state.password||n.state.password.length<3||n.state.password.length>20)){e.next=15;break}alert("Password cannot be empty! A password must be between 3 to 20 chars!"),e.next=35;break;case 15:if(""!==n.state.first_name&&null!==n.onlyLetters(n.state.first_name)){e.next=19;break}alert("Firstname cannot be empty! The first name may only consist letters!"),e.next=35;break;case 19:if(""!==n.state.last_name&&null!==n.onlyLetters(n.state.last_name)){e.next=23;break}alert("Lastname cannot be empty! The first name may only consist letters!"),e.next=35;break;case 23:return e.prev=23,r=new C(n.state.username,n.state.password,n.state.first_name,n.state.last_name),e.next=27,b.a.post("http://localhost:3001/api/users/signup",r);case 27:alert("Registered successfully! Please login before using our services."),n.props.history.push("/home"),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(23),alert(e.t0.message),console.log(e.t0);case 35:case"end":return e.stop()}}),e,null,[[23,31]])}))),n.state={username:"",password:"",first_name:"",last_name:"",takenUsernames:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/users/allusernames");case 2:t=e.sent,this.setState({takenUsernames:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onlyLetters",value:function(e){return e.match("^[A-Za-z]+$")}},{key:"render",value:function(){return s.a.createElement("div",{className:"signup"},s.a.createElement(y.b,{to:"/home",exact:!0},s.a.createElement("input",{type:"button",className:"btn btn-outline-info btn-lg",value:"Back"})),s.a.createElement("div",{className:"signUpForm"},s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"Username")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"username","aria-describedby":"basic-addon1",placeholder:"Username",name:"username",value:this.state.username,onChange:this.setUsername})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon2"},"Password")),s.a.createElement("input",{type:"password",className:"form-control","aria-label":"password","aria-describedby":"basic-addon2",placeholder:"Password",name:"password",value:this.state.password,onChange:this.setPassword}),s.a.createElement("br",null)),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Firstname")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"firstname","aria-describedby":"basic-addon3",placeholder:"Firstname",name:"firstname",value:this.state.first_name,onChange:this.setFirstName}),s.a.createElement("br",null)),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon4"},"Lastname")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"lastname","aria-describedby":"basic-addon4",placeholder:"Lastname",name:"lastname",value:this.state.last_name,onChange:this.setLastName}),s.a.createElement("br",null)),s.a.createElement("input",{type:"button",className:"btn btn-outline-primary btn-lg",value:"Submit",onClick:this.signUp})))}}]),a}(n.Component),V=(a(136),function e(t){Object(o.a)(this,e),this.vacation_description=t}),T=a(36),P=a.n(T),U=P()("http://localhost:3002"),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).startProcessingInformation=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacations");case 2:t=e.sent,n.setState({vacationsStorage:t.data}),n.setArrayUp(),U.on("changedvacations",(function(e){n.setState({vacationsStorage:e}),n.setArrayUp()}));case 6:case"end":return e.stop()}}),e)}))),n.backToLogin=function(){localStorage.removeItem("key"),n.props.history.push("/home")},n.updateVacations=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacations");case 2:t=e.sent,n.setState({vacationsStorage:t.data}),n.setArrayUp();case 5:case"end":return e.stop()}}),e)}))),n.setArrayUp=function(){for(var e=[],t=n.state.vacationsStorage,a=0;a<t.length;a++){var s={vacation_id:t[a].vacation_id,description:t[a].description,destination:t[a].destination,image:t[a].image,dates:t[a].dates,price:t[a].price,followers:t[a].followers,followed:0};e.push(s)}n.setState({vacationsStorage:e});for(var r=new Array(t.length),i=[],o=0;o<r.length;o++)r[o]={vacation_id:t[o].vacation_id,description:t[o].description,followed:!1,sorting:0},i[o]=!1;n.setState({isChecked:r}),n.sortArray()},n.sortArray=Object(v.a)(h.a.mark((function e(){var t,a,s,r,i,o,c,l,u,p,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacationsfollows");case 2:for(t=e.sent,a=t.data.length,s=n.state.isChecked,n.setState({checkedLength:a}),r=n.state.vacationsStorage,i=n.state.vacationsStorage,o=0;o<t.data.length;o++)for(c=0;c<s.length;c++)s[c].description===t.data[o].description&&(s[c].followed=!0,s[c].sorting=1);for(l=0;l<t.data.length;l++)for(u=0;u<r.length;u++)r[u].vacation_id===t.data[l].vacation_id&&(i[u].followed=1);n.setState({vacationsStorage:r,isChecked:s}),p=n.state.vacationsStorage.sort(n.orderMethodVacations),d=n.state.isChecked.sort(n.orderMethodFollowers),n.setState({vacations:p,isChecked:d}),n.updateCheckbox();case 15:case"end":return e.stop()}}),e)}))),n.updateCheckbox=function(){for(var e=0;e<n.state.vacationsStorage.length;e++){document.getElementById(n.state.vacationsStorage[e].description).checked=!1}for(var t=0;t<n.state.checkedLength;t++){document.getElementById(n.state.vacationsStorage[t].description).checked=!0}},n.orderMethodVacations=function(e,t){return e.followed>t.followed?-1:1},n.orderMethodFollowers=function(e,t){return e.sorting>t.sorting?-1:1},n.toggleCheckBox=function(){var e=Object(v.a)(h.a.mark((function e(t){var a,s,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.target.id,r=0;r<n.state.vacationsStorage.length;r++)a===n.state.isChecked[r].description&&(n.state.isChecked[r].followed=!n.state.isChecked[r].followed,s=r);if(i=new V(a),!n.state.isChecked[s].followed){e.next=8;break}return e.next=6,N.post("/vacations/followvacation",i);case 6:e.next=10;break;case 8:return e.next=10,N.post("/vacations/unfollowvacation",i);case 10:return U.emit("editvacation",{followed_or_unfollowed:""}),e.next=13,N.get("/vacations/getallvacations");case 13:o=e.sent,n.setState({vacationsStorage:o.data}),n.setArrayUp();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={vacations:[],isChecked:[],checkedLength:0,vacationsStorage:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==localStorage.getItem("key")){e.next=20;break}if(void 0===D.getState().userType){e.next=5;break}this.startProcessingInformation(),e.next=18;break;case 5:return console.log("Usertype isn't available. Attempting to get one from the server."),e.prev=6,e.next=9,N.get("/users/getuserrole");case 9:t=e.sent,console.log("Usertype received: "+t.data.userType),void 0!==t.data.userType?this.startProcessingInformation():this.backToLogin(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),alert(e.t0.response.data.Error),this.backToLogin();case 18:e.next=22;break;case 20:alert("You aren't even logged in."),this.props.history.push("/home");case 22:case"end":return e.stop()}}),e,this,[[6,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"vacations"},this.state.vacations.map((function(t,a){return s.a.createElement("div",{key:a,className:"vacationBox"},s.a.createElement("span",{className:"checkBox"},s.a.createElement("input",{type:"checkbox",id:t.description,onChange:e.toggleCheckBox})),s.a.createElement("div",{className:"vacationBoxDetails"},s.a.createElement("div",{className:"vacationDescription"},"Description: ",t.description,s.a.createElement("br",null)),"Destination: ",t.destination,s.a.createElement("br",null),"Dates: ",t.dates,s.a.createElement("br",null),"Price: ",t.price,s.a.createElement("br",null),s.a.createElement("img",{src:t.image,width:"40%",height:"40%",alt:""}),s.a.createElement("br",null),"Following: ",t.followers,s.a.createElement("br",null)))})))}}]),a}(n.Component),A=(a(169),P()("https://vacationsappapi.herokuapp.com")),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateVacations=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacations");case 2:t=e.sent,n.setState({vacations:t.data});case 4:case"end":return e.stop()}}),e)}))),n.userDoesntBelong=function(){alert("You don't belong here, sorry."),localStorage.removeItem("key"),n.props.history.push("/home")},n.backToLogin=function(){localStorage.removeItem("key"),n.props.history.push("/home")},n.editVacation=function(e){for(var t,a=e.target.id,s=0;s<n.state.vacations.length;s++)a===n.state.vacations[s].description&&(t=n.state.vacations[s],s=n.state.vacations.length);D.dispatch({type:w.editChosenVacation,payload:t}),n.props.history.push("/admin/editvacation")},n.deleteVacation=function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.id),console.log(a),e.prev=2,e.next=5,N.delete("/vacations/deletevacation/"+a);case 5:A.emit("deletevacation",{vacation_id:a}),n.updateVacations(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),n.state={vacations:[]},n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){A.close()}},{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==localStorage.getItem("key")){e.next=23;break}if("admin"!==D.getState().userType){e.next=6;break}this.updateVacations(),A.on("changedvacations",(function(e){a.setState({vacations:e})})),e.next=21;break;case 6:if(void 0!==D.getState().userType){e.next=20;break}return e.prev=7,e.next=10,N.get("/users/getuserrole");case 10:"admin"===(t=e.sent).data.userType?(D.dispatch({type:w.userType,payload:t.data.userType}),this.updateVacations(),A.on("changedvacations",(function(e){a.setState({vacations:e})}))):this.userDoesntBelong(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),alert(e.t0.response.data),this.backToLogin();case 18:e.next=21;break;case 20:this.userDoesntBelong();case 21:e.next=25;break;case 23:alert("You aren't even logged in."),this.props.history.push("/home");case 25:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"vacations"},s.a.createElement(y.b,{to:"/admin/charts",exact:!0},s.a.createElement("input",{type:"button",value:"Charts",className:"btn btn-outline-info btn-lg"})),s.a.createElement(y.b,{to:"/admin/addvacation",exact:!0},s.a.createElement("input",{type:"button",value:"Add new vacation",className:"btn btn-outline-primary btn-lg"})),s.a.createElement("br",null),this.state.vacations.map((function(t){return s.a.createElement("div",{key:t.vacation_id,className:"vacationBox"},s.a.createElement("div",{className:"edit"},s.a.createElement("button",{type:"submit",onClick:e.editVacation.bind(e),id:t.description},s.a.createElement("span",{className:"glyphicon glyphicon-pencil",id:t.description}))),s.a.createElement("div",{className:"delete"},s.a.createElement("button",{type:"submit",onClick:e.deleteVacation.bind(e),id:t.vacation_id.toString()},s.a.createElement("span",{className:"glyphicon glyphicon-remove",id:t.vacation_id.toString()}))),s.a.createElement("div",{className:"vacationBoxDetails"},"Description: ",t.description,s.a.createElement("br",null),"Destination: ",t.destination,s.a.createElement("br",null),"Dates: ",t.dates,s.a.createElement("br",null),"Price: ",t.price,s.a.createElement("br",null),s.a.createElement("img",{src:t.image,width:"40%",height:"40%",alt:""}),s.a.createElement("br",null),"Following: ",t.followers,s.a.createElement("br",null)))})))}}]),a}(n.Component),L=(a(170),a(99)),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).chartDetailsHelper={labels:[""],datasets:[{label:"Followers",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[0]}]},n.updateVacations=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacations");case 2:t=e.sent,n.setState({vacations:t.data}),n.setLabelsAndData();case 5:case"end":return e.stop()}}),e)}))),n.setLabelsAndData=function(){for(var e=[],t=[],a=0;a<n.state.vacations.length;a++)n.state.vacations[a].followers>0&&(e.push(n.state.vacations[a].description),t.push(n.state.vacations[a].followers));n.chartDetailsHelper.labels=e,n.chartDetailsHelper.datasets[0].data=t,n.setState({chartDetails:n.chartDetailsHelper})},n.userDoesntBelong=function(){alert("You don't belong here, sorry."),localStorage.removeItem("key"),n.props.history.push("/home")},n.backToLogin=function(){localStorage.removeItem("key"),n.props.history.push("/home")},n.state={vacations:[],chartDetails:{labels:[],datasets:[{label:"Followers",backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[]}]}},n}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){A.close()}},{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==localStorage.getItem("key")){e.next=25;break}if("admin"!==D.getState().userType){e.next=6;break}this.updateVacations(),A.on("changedvacations",(function(e){a.updateVacations()})),e.next=23;break;case 6:if(void 0!==D.getState().userType){e.next=22;break}return console.log("Usertype isn't available. Attempting to get one from the server."),e.prev=8,e.next=11,N.get("/users/getuserrole");case 11:t=e.sent,console.log("Usertype received: "+t.data.userType),"admin"===t.data.userType?(D.dispatch({type:w.userType,payload:t.data.userType}),this.updateVacations(),A.on("changedvacations",(function(e){a.updateVacations()}))):this.userDoesntBelong(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(8),alert(e.t0.response.data),this.backToLogin();case 20:e.next=23;break;case 22:this.userDoesntBelong();case 23:e.next=27;break;case 25:alert("You aren't even logged in."),this.props.history.push("/home");case 27:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(y.b,{to:"/admin/controlpanel",exact:!0},s.a.createElement("input",{type:"button",value:"Back",className:"btn btn-outline-info btn-lg"})),s.a.createElement("br",null),s.a.createElement("div",{className:"col-md-9 chart"},s.a.createElement(L.a,{data:this.state.chartDetails,options:{title:{display:!0,text:"Followers per vacation",fontSize:20},legend:{display:!0,position:"right"}}})))}}]),a}(n.Component),M=(a(262),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).fileInput=void 0,n.updateDescriptions=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacationsdescriptions");case 2:t=e.sent,n.setState({takenDescriptions:t.data});case 4:case"end":return e.stop()}}),e)}))),n.setDescription=function(e){var t=e.target.value;n.setState({description:t})},n.setDestination=function(e){var t=e.target.value;n.setState({destination:t})},n.setDates=function(e){var t=e.target.value;n.setState({dates:t})},n.setPrice=function(e){var t=e.target.value;n.setState({price:parseInt(t)})},n.addVacation=Object(v.a)(h.a.mark((function e(){var t,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.state.description,a=!1,s=0;s<n.state.takenDescriptions.length;s++)t===n.state.takenDescriptions[s].description&&(a=!0,s=n.state.takenDescriptions.length);if(""===n.state.description)alert("A vacation must have a description!");else if(a)alert("Description is already used by another vacation. Please enter a different one and try again.");else if(""===n.state.destination)alert("A vacation must have a destination!");else if(""===n.state.dates)alert("A vacation must have dates!");else if(n.state.price<=0)alert("A vacation must have a price above 0!");else if(null===n.state.vacation_image)alert("A vacation must have an image!");else try{n.uploadVacation(),A.emit("addvacation",{description:n.state.description,destination:n.state.destination,dates:n.state.dates,price:n.state.price}),n.props.history.push("/admin/controlpanel")}catch(r){alert(r.message),console.log(r)}case 4:case"end":return e.stop()}}),e)}))),n.goBack=function(){n.props.history.push("/admin/controlpanel")},n.imageSelectionHandler=function(e){n.setState({vacation_image:e.target.files[0]})},n.uploadVacation=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",n.state.vacation_image,n.state.vacation_image.name),t.append("description",n.state.description),t.append("destination",n.state.destination),t.append("dates",n.state.dates),t.append("price",n.state.price.toString()),e.next=8,N.post("/vacations/addnewvacation",t);case 8:case"end":return e.stop()}}),e)}))),n.state={description:"",destination:"",dates:"",price:0,vacation_image:null,takenDescriptions:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=localStorage.getItem("key")?"admin"===D.getState().userType?this.updateDescriptions():(alert("You have either refreshed the page or entered it directly through the url. Please enter through the control panel, assuming you are an admin."),this.props.history.push("/admin/controlpanel")):(alert("You aren't even logged in."),this.props.history.push("/home"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("input",{type:"button",onClick:this.goBack,value:"Back",className:"btn btn-outline-info btn-lg"}),s.a.createElement("br",null),s.a.createElement("div",{className:"addVacationForm"},s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"Description")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"description","aria-describedby":"basic-addon1",placeholder:"Description",name:"description",value:this.state.description,onChange:this.setDescription})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon2"},"Destination")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"destination","aria-describedby":"basic-addon2",placeholder:"Destination",name:"destination",value:this.state.destination,onChange:this.setDestination})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Dates")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"dates","aria-describedby":"basic-addon3",placeholder:"Dates",name:"dates",value:this.state.dates,onChange:this.setDates})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon4"},"Price")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"price","aria-describedby":"basic-addon4",placeholder:"Price",name:"price",value:this.state.price,onChange:this.setPrice})),s.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.imageSelectionHandler,ref:function(t){return e.fileInput=t}}),s.a.createElement("input",{type:"button",onClick:function(){return e.fileInput.click()},className:"btn btn-outline-info btn-lg",value:"Pick vacation image"}),s.a.createElement("br",null),s.a.createElement("input",{type:"button",className:"btn btn-outline-primary btn-lg",onClick:this.addVacation,value:"Submit"})))}}]),a}(n.Component)),Y=(a(263),function e(t,a,n,s,r){Object(o.a)(this,e),this.vacation_id=t,this.description=a,this.destination=n,this.dates=s,this.price=r}),H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).fileInput=void 0,n.updateDescriptions=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/vacations/getallvacationsdescriptions");case 2:t=e.sent,n.setState({takenDescriptions:t.data});case 4:case"end":return e.stop()}}),e)}))),n.setDescription=function(e){var t=e.target.value;n.setState({description:t})},n.setDestination=function(e){var t=e.target.value;n.setState({destination:t})},n.setDates=function(e){var t=e.target.value;n.setState({dates:t})},n.setPrice=function(e){var t=e.target.value;n.setState({price:parseInt(t)})},n.editVacation=Object(v.a)(h.a.mark((function e(){var t,a,s,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.state.description,a=n.state.previous_description,s=!1,r=0;r<n.state.takenDescriptions.length;r++)t===n.state.takenDescriptions[r].description&&t!==a&&(s=!0,r=n.state.takenDescriptions.length);if(""!==n.state.description){e.next=8;break}alert("A vacation must have a description!"),e.next=40;break;case 8:if(!s){e.next=12;break}alert("Description is already used by another vacation. Please enter a different one and try again."),e.next=40;break;case 12:if(""!==n.state.destination){e.next=16;break}alert("A vacation must have a destination!"),e.next=40;break;case 16:if(""!==n.state.dates){e.next=20;break}alert("A vacation must have dates!"),e.next=40;break;case 20:if(!(n.state.price<=0)){e.next=24;break}alert("A vacation must have a price above 0!"),e.next=40;break;case 24:if(e.prev=24,"yes"!==n.state.does_need_image){e.next=29;break}n.uploadVacation(),e.next=32;break;case 29:return i=new Y(n.state.vacation_id,n.state.description,n.state.destination,n.state.dates,n.state.price),e.next=32,N.patch("/vacations/updatevacation",i);case 32:A.emit("editvacation",{description:n.state.description,destination:n.state.destination,dates:n.state.dates,price:n.state.price}),n.props.history.push("/admin/controlpanel"),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(24),alert(e.t0.message),console.log(e.t0);case 40:case"end":return e.stop()}}),e,null,[[24,36]])}))),n.goBack=function(){n.props.history.push("/admin/controlpanel")},n.imageSelectionHandler=function(e){n.setState({vacation_image:e.target.files[0],does_need_image:"yes"})},n.uploadVacation=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",n.state.vacation_image,n.state.vacation_image.name),t.append("vacation_id",n.state.vacation_id.toString()),t.append("description",n.state.description),t.append("destination",n.state.destination),t.append("dates",n.state.dates),t.append("price",n.state.price.toString()),e.next=9,N.patch("/vacations/updatevacation",t);case 9:case"end":return e.stop()}}),e)}))),n.state={vacation_id:0,description:"",destination:"",dates:"",price:0,does_need_image:"no",vacation_image:null,previous_description:"",takenDescriptions:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=localStorage.getItem("key")?"admin"===D.getState().userType?(this.updateDescriptions(),this.setState({vacation_id:D.getState().chosenVacation.vacation_id,description:D.getState().chosenVacation.description,destination:D.getState().chosenVacation.destination,dates:D.getState().chosenVacation.dates,price:D.getState().chosenVacation.price,previous_description:D.getState().chosenVacation.description})):(alert("You have either refreshed the page or entered it directly through the url. Please enter through the control panel, assuming you are an admin."),this.props.history.push("/admin/controlpanel")):(alert("You aren't even logged in."),this.props.history.push("/home"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("input",{type:"button",onClick:this.goBack,value:"Back",className:"btn btn-outline-info btn-lg"}),s.a.createElement("br",null),s.a.createElement("div",{className:"addVacationForm"},s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"Description")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"description","aria-describedby":"basic-addon1",placeholder:"Description",name:"description",value:this.state.description,onChange:this.setDescription})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon2"},"Destination")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"destination","aria-describedby":"basic-addon2",placeholder:"Destination",name:"destination",value:this.state.destination,onChange:this.setDestination})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon3"},"Dates")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"dates","aria-describedby":"basic-addon3",placeholder:"Dates",name:"dates",value:this.state.dates,onChange:this.setDates})),s.a.createElement("div",{className:"input-group input-group-lg"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("span",{className:"input-group-text",id:"basic-addon4"},"Price")),s.a.createElement("input",{type:"text",className:"form-control","aria-label":"price","aria-describedby":"basic-addon4",placeholder:"Price",name:"price",value:this.state.price,onChange:this.setPrice})),s.a.createElement("input",{style:{display:"none"},type:"file",onChange:this.imageSelectionHandler,ref:function(t){return e.fileInput=t}}),s.a.createElement("button",{onClick:function(){return e.fileInput.click()},className:"btn btn-outline-info btn-lg"},"Pick vacation image"),s.a.createElement("input",{type:"button",className:"btn btn-outline-primary btn-lg",onClick:this.editVacation,value:"Submit"})))}}]),a}(n.Component),W=a(4),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(y.a,null,s.a.createElement("section",{className:"layout"},s.a.createElement("header",null,s.a.createElement(p,null)),s.a.createElement("main",null,s.a.createElement(W.d,null,s.a.createElement(W.b,{path:"/home",component:O,exact:!0}),s.a.createElement(W.b,{path:"/signup",component:_,exact:!0}),s.a.createElement(W.b,{path:"/vacations",component:I,exact:!0}),s.a.createElement(W.b,{path:"/admin/controlpanel",component:B,exact:!0}),s.a.createElement(W.b,{path:"/admin/charts",component:F,exact:!0}),s.a.createElement(W.b,{path:"/admin/addvacation",component:M,exact:!0}),s.a.createElement(W.b,{path:"/admin/editvacation",component:H,exact:!0}),s.a.createElement(W.a,{from:"/",to:"/home",exact:!0}))),s.a.createElement("footer",null,s.a.createElement(d,null))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.f85eab75.chunk.js.map